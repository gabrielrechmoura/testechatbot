<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>RHBot - Chat</title>
  <link rel="stylesheet" href="../assets/css/header.css">
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(to right, #520000, #470101);
      margin: 0;
    }

    main {
      display: flex;
      justify-content: center;
    }

    #chat {
      width: 600px;
      height: 700px;
      max-height: 90vh;
      background: #570303;
      border-radius: 12px;
      box-shadow: 0 0 15px rgba(253, 252, 252, 0.2);
      display: flex;
      flex-direction: column;
      overflow: hidden;
    }

    #header {
      background: #fafafa;
      color: rgb(82, 5, 5);
      padding: 15px;
      font-weight: bold;
      font-size: 18px;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    #header img {
      border-radius: 50%;
    }

    #messages {
      flex: 1;
      padding: 15px;
      overflow-y: auto;
      background: #470101;
    }

    .message {
      margin: 10px 0;
      max-width: 80%;
      padding: 10px 15px;
      border-radius: 20px;
      line-height: 1.3;
      word-wrap: break-word;
      display: inline-block;
    }

    .bot {
      background: #ffffff;
      color: #000000;
      align-self: flex-start;
      border-bottom-left-radius: 0;
    }

    .user {
      background: #7a3232;
      color: #f8e1e1;
      align-self: flex-end;
      border-bottom-right-radius: 0;
      text-align: right;
    }

    #input-area {
      display: flex;
      border-top: 1px solid #fff3f3;
    }

    #userInput {
      flex: 1;
      border: none;
      padding: 15px;
      font-size: 12px;
      outline: none;
    }

    button {
      background: #550000;
      color: white;
      border: none;
      padding: 15px 20px;
      font-size: 16px;
      cursor: pointer;
      transition: 0.3s;
    }

    button:hover {
      background: #af0404;
    }

    .opcao-btn {
      background: #f0d6d6;
      color: #000000;
      border-radius: 20px;
      padding: 10px 15px;
      border: none;
      cursor: pointer;
      font-weight: bold;
      margin-top: 10px;
    }

    .opcao-btn:hover {
      background: #940404;
    }
  </style>
</head>
<body>
    <header id="main-header">
        <div class="container">
            <h1>Portal de Chatbots</h1>
            <nav>
            <a href="../index.html">InÃ­cio</a>
            <a href="../chat1_teddybot/index.html">Teddy Bot</a>
            <a href="../chat2_milkbot/index.html">Milk Bot</a>
            <a href="../chat3/index.html">Diamond Bot</a>
            <a href="../chat4/index.html">Chat 4 - Sem nome</a>
            <a href="../chat5-hortilar bot/hortlar.html">HortLar Bot</a>
            </nav>
        </div>
    </header>
  <script src="../assets/js/header.js"></script>

  <!-- CONTEÃšDO DO CHAT -->
  <main>
    <div id="chat">
      <div id="header"><img src="tedperfil.png" alt="" width="35px"> TEDDYBOT</div>
      <div id="messages">
        <div class="message bot">
          <strong>OlÃ¡!!ğŸ¤— Tudo bem?, como posso ajudar hoje?...</strong><br><br>
          AlÃ©m das opÃ§Ãµes abaixo tambÃ©m posso te informar o <strong>horario</strong>, o <strong>clima</strong>, e te incentivar com uma Ã³tima <strong>motivaÃ§Ã£o</strong>!ğŸ’™ğŸ¤©
        </div>
      </div>
      <div id="input-area">
        <input type="text" id="userInput" placeholder="Digite aqui...">
        <button onclick="sendMessage()">Enviar</button>
      </div>
    </div>
  </main>

  <!-- InÃ­cio da seÃ§Ã£o de JavaScript -->
  <script>

    window.onload = function() {
        setTimeout(() => mostrarBotoes(), 1000);
    }

     /* FunÃ§Ã£o para enviar mensagem do usuÃ¡rio e obter resposta do bot */
    function sendMessage() {
      const input = document.getElementById('userInput'); // ObtÃ©m o elemento de entrada de texto
      const msg = input.value.trim(); // Remove espaÃ§os em branco no inÃ­cio/fim e armazena a mensagem

      if (msg === "") return; // Se a mensagem estiver vazia, nÃ£o faz nada

      addMessage(msg, "user");  // Adiciona a mensagem do usuÃ¡rio ao chat
      input.value = ""; // Limpa o campo de entrada

      const resposta = responder(msg);  // ObtÃ©m a resposta do bot para a mensagem do usuÃ¡rio
      setTimeout(() => addMessage(resposta, "bot"), 500); // Adiciona a resposta do bot apÃ³s um pequeno atraso (500ms)
    }

    /* FunÃ§Ã£o que adiciona uma mensagem ao chat */
    function addMessage(text, type) {
      const messagesDiv = document.getElementById('messages');  // ObtÃ©m a div que contÃ©m todas as mensagens

      const container = document.createElement('div');  // Cria um container para a mensagem (para controlar o alinhamento)
      container.style.display = 'flex';
      container.style.justifyContent = type === 'user' ? 'flex-end' :  'flex-start';  // Alinha Ã  direita para mensagens do usuÃ¡rio, esquerda para o bot

      const div = document.createElement('div');  // Cria a div que vai conter o texto da mensagem
      div.className = 'message ' + type;  // Adiciona classes CSS

      // Se for mensagem do bot, converte quebras de linha para tags <br>
      if (type === 'bot') { 
        div.innerHTML = text.replace(/\n/g, "<br>"); // quebra linha sÃ³ nas mensagens do bot
      } else {
        div.textContent = text; // Mensagens do usuÃ¡rio usam textContent para seguranÃ§a
      }

      // Adiciona a mensagem ao container e o container Ã  Ã¡rea de mensagens
      container.appendChild(div);
      messagesDiv.appendChild(container);
      messagesDiv.scrollTop = messagesDiv.scrollHeight; // Rola automaticamente para a Ãºltima mensagem
    }

    /* FunÃ§Ã£o da LÃ³gica principal do bot - responde Ã s mensagens do usuÃ¡rio */
    function responder(msg) {
      msg = msg.toLowerCase();  // Converte a mensagem para minÃºsculas para facilitar a comparaÃ§Ã£o

      if (msg.includes("obrigado") || msg.includes("obrigada")) {
    return "Por nada, estou aqui para te auxiliar. NÃ£o hesite em me chamar ao precisar tirar dÃºvidas. A dÃºvida Ã© o princÃ­pio da sabedoria. ğŸŒŸğŸ˜Š Tenha um Ã³timo dia!.";
  }


      // Respostas fixas para mensagens especÃ­ficas
      const respostasFixas = {  
        "sair": "AtÃ© logo! Estarei aqui se precisar.",
      };

      // Se a mensagem corresponder a uma resposta fixa, retorna ela
      if (respostasFixas[msg]) {
        return respostasFixas[msg];
        
      }

      if (msg.includes("clima")) {
        const apiKey = "a3dc0b30329819faf1d5392355fe16ed"
        const cidade = "Capinzal"

        fetch(`https://api.openweathermap.org/data/2.5/weather?q=${cidade}&appid=${apiKey}&lang=pt_br&units=metric`)
        .then(response => response.json())
        .then(data => {
          const temperatura = data.main.temp;
          const descricao = data.weather[0].description;

          addMessage(`O clima em ${cidade} estÃ¡ ${descricao} com temperatura de ${temperatura}Â°C.`, "bot");
        })
        .catch (error => {
          console.log("Erro ao obter o clima:", "bot");
          addMessage("NÃ£o foi possÃ­vel obter o clima no momento.", "bot");
        })
      }

      // Se a mensagem incluir hora
      if (msg.includes("hora")) {
        const agora = new Date();
        return `Agora sÃ£o ${agora.getHours()}h${agora.getMinutes().toString().padStart(2, '0')}m`;
      }

       // Se a mensagem for "Oi", mostra o menu inicial
if (msg.toLowerCase() === "oi" || msg.toLowerCase() === "olÃ¡") {
  // Primeiro, envia a mensagem de saudaÃ§Ã£o
  addMessage("Oi de novo!ğŸ˜Š Como posso te ajudar agora?", "bot");

  // Agora, exibe o menu de opÃ§Ãµes
  setTimeout(() => mostrarBotoes(), 500);  // Delay de 500ms para dar tempo de exibir a mensagem primeiro
  return;  // NÃ£o retorna texto diretamente, pois a mensagem jÃ¡ foi adicionada com addMessage
}
    
      // Se a mensagem incluir "motivaÃ§Ãµes", exibe uma frase motivacional aleatÃ³ria
if (msg.includes("motivaÃ§Ãµes") || msg.includes("motivaÃ§Ã£o")) {
  const motivacoes = [
    "ğŸ’¡ NÃ£o importa quÃ£o lento vocÃª vÃ¡, desde que vocÃª nÃ£o pare.",
    "ğŸš€ O sucesso Ã© a soma de pequenos esforÃ§os repetidos diariamente.",
    "ğŸ”¥ VocÃª Ã© mais forte do que imagina. Continue em frente!",
    "ğŸŒ± Grandes realizaÃ§Ãµes levam tempo. Seja paciente e persistente.",
    "ğŸ¯ Foque no progresso, nÃ£o na perfeiÃ§Ã£o.",
    "ğŸ’ª Cada desafio superado Ã© um passo a mais rumo ao seu objetivo.",
    "ğŸ“ˆ O esforÃ§o de hoje Ã© a conquista de amanhÃ£.",
    "ğŸŒŸ Acredite no seu potencial e tudo serÃ¡ possÃ­vel.",
    "â³ NÃ£o desista. As grandes mudanÃ§as exigem tempo e coragem.",
    "ğŸ O importante nÃ£o Ã© onde vocÃª estÃ¡ agora, mas onde quer chegar."
  ];
  return motivacoes[Math.floor(Math.random() * motivacoes.length)];
}



      // Resposta padrÃ£o caso nÃ£o entenda a mensagem
      return "Desculpe, nÃ£o entendi. Tente perguntar sobre o clima, horÃ¡rio ou peÃ§a uma frase de motivaÃ§Ã£o.";
    }

    /* FunÃ§Ã£o que Mostra botÃµes Inicio */
    function mostrarBotoes() {
      const messagesDiv = document.getElementById("messages");

     // BotÃµes de opÃ§Ãµes do menu inicial
const opcoes = [
  { 
    texto: "ğŸš¨Consultar atividades pendentes", 
    resposta: "<strong>14/05:</strong> Projeto da CecÃ­lia.<br><strong>12/04:</strong> Projeto do JoÃ£o.<br><br>Quer mais detalhes?" 
  },
  { 
    texto: "ğŸ—’ï¸ReuniÃµes marcadas para hoje", 
    resposta: "VocÃª tem uma reuniÃ£o agendada para <strong>hoje</strong>.<br><br>Quer saber o horÃ¡rio?" 
  },
  {
    texto: "ğŸ“…Dias restantes para o projeto da Cecilia", 
    resposta: "O prazo final estÃ¡ se aproximando.<br><br>Quer saber <strong>quantos dias faltam?</strong>" 
  },
  { 
    texto: "ğŸš§Problemas relatados na obra da BRF", 
    resposta: "Foram registradas <strong>ocorrÃªncias na obra da BRF</strong>.<br><br>Quer ver os detalhes?" 
  },
  { 
    texto: "âœ…ResponsÃ¡vel pela Ãºltima aprovaÃ§Ã£o do seu projeto", 
    resposta: "A Ãºltima alteraÃ§Ã£o foi <strong>aprovada recentemente</strong>.<br><br>Quer saber quem aprovou?" 
  },
  {   
    texto: "ğŸ“ŠProgresso rumo a meta mensal", 
    resposta: "Seus <strong>resultados</strong> estÃ£o sendo acompanhados.<br><br>Quer saber o progresso atual?" 
  },
  {   
    texto: "â° Meta Mais Urgente Agora", 
    resposta: "HÃ¡ uma <strong>meta em destaque</strong> neste momento.<br><br>Quer saber qual Ã©?" 
  },
  {
    texto: "â³Possibilidade de incluir jovem aprendiz no setor", 
    resposta: "HÃ¡ possibilidade de incluir um <strong>jovem aprendiz</strong> no setor.<br><br>Quer que eu veja os requisitos ou inicie o processo?" 
  },
];

      // Cria container para os botÃµes
      const container = document.createElement("div");
      container.style.display = "flex";
      container.style.flexDirection = "column";
      container.style.rowgap = "10px";
      container.style.marginTop = "10px"; 
      
      // Cria um botÃ£o para cada opÃ§Ã£o
      opcoes.forEach(opcao => {
        const btn = document.createElement("button");
        btn.className = "opcao-btn";
        btn.textContent = opcao.texto;
        btn.onclick = () => {
          addMessage(opcao.texto, "user");  // Adiciona a opÃ§Ã£o selecionada como mensagem do usuÃ¡rio
        
          
          addMessage(opcao.resposta, "bot");
          container.remove();

          // Cria botÃµes de aÃ§Ã£o apÃ³s selecionar uma opÃ§Ã£o
          const novoContainer = document.createElement("div");
          novoContainer.style.display = "flex";
          novoContainer.style.gap = "10px";
          novoContainer.style.marginTop = "10px";

// BotÃ£o para sim
const SimBtn = document.createElement("button");
SimBtn.className = "opcao-btn";
SimBtn.style.marginTop = "10px";
SimBtn.textContent = "Sim";
SimBtn.onclick = () => {
  addMessage("Sim", "user");

  let respostaSim = "";

  switch (opcao.texto) {
  case "ğŸš¨Consultar atividades pendentes":
    respostaSim = "<strong>Projeto do JoÃ£o:</strong> Revisar apresentaÃ§Ã£o e enviar feedback atÃ© sexta.<br><br><strong>Projeto da CecÃ­lia:</strong> Finalizar relatÃ³rio e anexar documentos no sistema atÃ© amanhÃ£.<br><br>Caso precisar consultar outras informaÃ§Ãµes basta me mandar um oiğŸ¤—! estarei sempre a disposiÃ§Ã£o, espero ter ajudado!!.";
    break;
  case "ğŸ—’ï¸ReuniÃµes marcadas para hoje":
    respostaSim = "ğŸ•’ <strong>A reuniÃ£o estÃ¡ marcada para Ã s 14h, na sala 3.</strong><br><br>Caso precisar consultar outras informaÃ§Ãµes basta me mandar um oiğŸ¤—! estarei sempre a disposiÃ§Ã£o, espero ter ajudado!!.";
    break;
  case "ğŸ“…Dias restantes para o projeto da Cecilia":
    respostaSim = "â³ <strong>Faltam 5 dias</strong> para a entrega do Projeto da CecÃ­lia.<br><br>Caso precisar consultar outras informaÃ§Ãµes basta me mandar um oiğŸ¤—! estarei sempre a disposiÃ§Ã£o, espero ter ajudado!!.";
    break;
  case "ğŸš§Problemas relatados na obra da BRF":
    respostaSim = "ğŸš§ <strong>Houve atraso</strong> na entrega de materiais e revisÃ£o no cronograma.<br><br>Caso precisar consultar outras informaÃ§Ãµes basta me mandar um oiğŸ¤—! estarei sempre a disposiÃ§Ã£o, espero ter ajudado!!.";
    break;
  case "âœ…ResponsÃ¡vel pela Ãºltima aprovaÃ§Ã£o do seu projeto":
    respostaSim = "âœ… <strong>Foi aprovada por Ana ClÃ¡udia</strong>, da equipe tÃ©cnica.<br><br>Caso precisar consultar outras informaÃ§Ãµes basta me mandar um oiğŸ¤—! estarei sempre a disposiÃ§Ã£o, espero ter ajudado!!.";
    break;
  case "ğŸ“ŠProgresso rumo a meta mensal":
    respostaSim = "ğŸ“ˆ <strong>VocÃª jÃ¡ cumpriu 72%</strong> da meta mensal.<br><br>Caso precisar consultar outras informaÃ§Ãµes basta me mandar um oiğŸ¤—! estarei sempre a disposiÃ§Ã£o, espero ter ajudado!!.";
    break;
  case "â° Meta Mais Urgente Agora":
    respostaSim = "ğŸ“Œ <strong>A meta mais urgente agora</strong> Ã© a entrega da proposta final do Projeto JoÃ£o atÃ© amanhÃ£.<br><br>Caso precisar consultar outras informaÃ§Ãµes basta me mandar um oiğŸ¤—! estarei sempre a disposiÃ§Ã£o, espero ter ajudado!!.";
    break;
  case "â³Possibilidade de incluir jovem aprendiz no setor":
    respostaSim = "ğŸ‘¨â€ğŸ“ <strong>Vou buscar os requisitos</strong> e candidatos disponÃ­veis.<br><br>Caso precisar consultar outras informaÃ§Ãµes basta me mandar um oiğŸ¤—! estarei sempre a disposiÃ§Ã£o, espero ter ajudado!!.";
    break;
  default:
    respostaSim = "ğŸ‘ <strong>Certo! Obrigado por confirmar.</strong>";
}

  addMessage(respostaSim, "bot");
  novoContainer.remove();
};
          // BotÃ£o para nÃ£o
          const naoBtn = document.createElement("button");
          naoBtn.className = "opcao-btn";
          naoBtn.textContent = "âŒ NÃ£o, obrigado";
          naoBtn.onclick = () => {
            addMessage("NÃ£o, obrigado", "user");
  novoContainer.remove();
  addMessage("Por nada, espero ter ajudado!! ğŸ¤—<br>Lembre-se... sempre que precisar estarei Ã  disposiÃ§Ã£o, basta me enviar um oi.<br><br>âœ¨ Tenha um Ã³timo dia!", "bot");
          };
          
          // Adiciona os botÃµes ao container e ao chat
          novoContainer.appendChild(SimBtn);
          novoContainer.appendChild(naoBtn);
          messagesDiv.appendChild(novoContainer);
          messagesDiv.scrollTop = messagesDiv.scrollHeight;
        };


        container.appendChild(btn);
      });
      
      // Adiciona os botÃµes ao chat
      messagesDiv.appendChild(container);
      messagesDiv.scrollTop = messagesDiv.scrollHeight;
    }

    /* FunÃ§Ã£o que Mostra botÃµes com opÃ§Ãµes de benefÃ­cios */
    function mostrarBotoesMaisOpcoes() {
      const messagesDiv = document.getElementById("messages");

      
 
      // Cria container para os botÃµes
      const container = document.createElement("div");
      container.style.display = "flex";
      container.style.flexDirection = "column";
      container.style.rowgap = "10px";
      container.style.marginTop = "10px"; 
      
      // Cria um botÃ£o para cada opÃ§Ã£o
      opcoes.forEach(opcao => {
        const btn = document.createElement("button");
        btn.className = "opcao-btn";
        btn.textContent = opcao.texto;
        btn.onclick = () => {
          addMessage(opcao.texto, "user");  // Adiciona a opÃ§Ã£o selecionada como mensagem do usuÃ¡rio

          
          // Se clicou em "Nada, obrigado", apenas remove os botÃµes
          if (opcao.texto === "âŒ Nada, obrigado") {
            container.remove();
            return; // â† impede que o restante do cÃ³digo rode
          }

          addMessage(opcao.resposta, "bot");
          container.remove();

          // Cria botÃµes de aÃ§Ã£o apÃ³s selecionar uma opÃ§Ã£o
          const novoContainer = document.createElement("div");
          novoContainer.style.display = "flex";
          novoContainer.style.gap = "10px";
          novoContainer.style.marginTop = "10px";
          
          // BotÃ£o para encerrar
          const naoBtn = document.createElement("button");
          naoBtn.className = "opcao-btn";
          naoBtn.textContent = "âŒ NÃ£o, obrigado";
          naoBtn.onclick = () => {
            addMessage("NÃ£o, obrigado", "user");
            novoContainer.remove();
          };
          
          // Adiciona os botÃµes ao container e ao chat
          novoContainer.appendChild(repetirBtn);
          novoContainer.appendChild(naoBtn);
          messagesDiv.appendChild(novoContainer);
          messagesDiv.scrollTop = messagesDiv.scrollHeight;
        };


        container.appendChild(btn);
      });
      
      // Adiciona os botÃµes ao chat
      messagesDiv.appendChild(container);
      messagesDiv.scrollTop = messagesDiv.scrollHeight;
    }

    // Permite enviar mensagem pressionando Enter
    document.getElementById("userInput").addEventListener("keypress", function(event) {
      if (event.key === "Enter") {
        event.preventDefault(); // Evita o comportamento padrÃ£o do Enter
        sendMessage();  // Chama a funÃ§Ã£o de enviar mensagem
      }
    });

    function addMessage(text, type) {
  const messagesDiv = document.getElementById('messages');

  const container = document.createElement('div');
  container.style.display = 'flex';
  container.style.alignItems = 'flex-end';
  container.style.marginBottom = '10px';
  container.style.justifyContent = type === 'user' ? 'flex-end' : 'flex-start';

  // Adiciona a imagem de perfil
  const img = document.createElement('img');
  img.src = type === 'user' 
    ? 'user.png' 
    : 'ted.png'; 
  img.style.width = '35px';
  img.style.height = '35px';
  img.style.borderRadius = '50%';
  img.style.margin = type === 'user' ? '0 0 0 8px' : '0 8px 0 0';

  const div = document.createElement('div');
  div.className = 'message ' + type;

  if (type === 'bot') {
    div.innerHTML = text.replace(/\n/g, "<br>");
  } else {
    div.textContent = text;
  }

  if (type === 'user') {
    container.appendChild(div);
    container.appendChild(img);
  } else {
    container.appendChild(img);
    container.appendChild(div);
  }

  messagesDiv.appendChild(container);
  messagesDiv.scrollTop = messagesDiv.scrollHeight;
}
  </script>
</body>
</html>
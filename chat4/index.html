<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>RHBot - Chat</title>
  <link rel="stylesheet" href="../assets/css/header.css">
  <style> /*-- In√≠cio da se√ß√£o de estilos CSS */

    /* Estilo geral do corpo da p√°gina */
    body {  
      font-family: 'Segoe UI', sans-serif;  /* Define a fonte padr√£o */
      background: linear-gradient(to right, #6997b6, #2c6396);  /* Fundo com gradiente azul */
      margin: 0;  /* Remove margens padr√£o */
    }
    
    main {
      display: flex;
      justify-content: center;
    }

    /* Estilo do container principal do chat */
    #chat {
      width: 600px;  /* Largura fixa */
      height: 700px;  /* Altura fixa */
      max-height: 90vh;  /* Altura m√°xima de 90% da tela */
      background: #fff;  /* Fundo branco */
      border-radius: 12px;  /* Bordas arredondadas */
      box-shadow: 0 0 15px rgba(0,0,0,0.2);  /* Sombra suave */
      display: flex;  /* Usa flexbox para organizar os elementos internos */
      flex-direction: column;  /* Organiza os filhos em coluna */
      overflow: hidden;  /* Esconde qualquer conte√∫do que ultrapasse */
    }

    /* Estilo do cabe√ßalho do chat */
    #header {
      background: #2193b0;  /* Cor de fundo azul */
      color: white;  /* Texto branco */
      padding: 15px;  /* Espa√ßamento interno */
      font-weight: bold;  /* Texto em negrito */
      font-size: 18px;  /* Tamanho da fonte */
    }

    /* √Årea onde as mensagens s√£o exibidas */
    #messages {
      flex: 1;  /* Ocupa todo o espa√ßo dispon√≠vel */
      padding: 15px;  /* Espa√ßamento interno */
      overflow-y: auto;  /* Habilita scroll vertical se necess√°rio */
      background: #f9f9f9;  /* Cor de fundo cinza claro */
    }

    /* Estilo base para todas as mensagens */
    .message {
      margin: 10px 0;  /* Espa√ßamento externo */
      max-width: 80%;  /* Largura m√°xima */
      padding: 10px 15px;  /* Espa√ßamento interno */
      border-radius: 20px;  /* Bordas arredondadas */
      line-height: 1.3;  /* Espa√ßamento entre linhas */
      word-wrap: break-word;  /* Quebra palavras longas */
      display: inline-block;  /* Permite que a largura se ajuste ao conte√∫do */
    }

    /* Estilo espec√≠fico para mensagens do bot */
    .bot {
      background: #96c7cebd;  /* Cor de fundo azul claro */
      color: #006064;  /* Cor do texto azul escuro */
      align-self: flex-start;  /* Alinha √† esquerda */
      border-bottom-left-radius: 0;  /* Remove arredondamento no canto inferior esquerdo */
    }


    /* Estilo espec√≠fico para mensagens do usu√°rio */
    .user {
      background: #96bad1a1;  /* Cor de fundo verde claro */
      color: #264e81;  /* Cor do texto verde escuro */
      align-self: flex-end;  /* Alinha √† direita */
      border-bottom-right-radius: 0;  /* Remove arredondamento no canto inferior direito */
      text-align: right;  /* Alinha o texto √† direita */
    }

    /* √Årea de entrada de texto */
    #input-area {
      display: flex;  /* Organiza os elementos filhos em linha */
      border-top: 1px solid #ddd;  /* Linha divis√≥ria no topo */
    }

    /* Campo de entrada de texto */
    #userInput {
      flex: 1;  /* Ocupa todo o espa√ßo dispon√≠vel */
      border: none;  /* Remove borda */
      padding: 15px;  /* Espa√ßamento interno */
      font-size: 16px;  /* Tamanho da fonte */
      outline: none;  /* Remove contorno ao focar */
    }

    /* Estilo do bot√£o de enviar */
    button {
      background: #35749e;  /* Cor de fundo azul */
      color: white;  /* Texto branco */
      border: none;  /* Remove borda */
      padding: 15px 20px;  /* Espa√ßamento interno */
      font-size: 16px;  /* Tamanho da fonte */
      cursor: pointer;  /* Muda cursor para pointer ao passar o mouse */
      transition: 0.3s;  /* Suaviza transi√ß√µes de estado */
    }

    /* Efeito hover no bot√£o */
    button:hover {
      background: #197a91;  /* Cor mais escura ao passar o mouse */
    }

    /* Estilo dos bot√µes de op√ß√£o */
    .opcao-btn {
      background: #b0d4ec;  /* Cor de fundo verde muito claro */
      color: #0f1658;  /* Cor do texto verde escuro */
      border-radius: 20px;  /* Bordas arredondadas */
      padding: 10px 15px;  /* Espa√ßamento interno */
      border: none;  /* Remove borda */
      cursor: pointer;  /* Muda cursor para pointer */
      font-weight: bold;  /* Texto em negrito */
      margin-top: 10px;  /* Espa√ßamento superior */
    }

    /* Efeito hover nos bot√µes de op√ß√£o */
    .opcao-btn:hover {
      background: #75a1db;  /* Cor de fundo mais escura ao passar o mouse */
    }
  </style>
</head>
<body>
    <header id="main-header">
        <div class="container">
            <h1>Portal de Chatbots</h1>
            <nav>
            <a href="../index.html">In√≠cio</a>
            <a href="../chat1_teddybot/index.html">Teddy Bot</a>
            <a href="../chat2_milkbot/index.html">Milk Bot</a>
            <a href="../chat3/index.html">Diamond Bot</a>
            <a href="../chat4/index.html">Chat 4 - Sem nome</a>
            <a href="../chat5-hortilar bot/hortlar.html">HortLar Bot</a>
            </nav>
        </div>
    </header>
  <script src="../assets/js/header.js"></script>

  <main>
    <!-- Container principal do chat -->
      <div id="chat">
        <!-- Cabe√ßalho com nome do bot -->
        <div id="header">üê± Leo, o leopardo</div>
        
        <!-- √Årea de mensagens (cont√©m a mensagem inicial do bot) -->
        <div id="messages">
          <div class="message bot">Ol√°! Me chamo Leo, o leopardo. Como posso lhe ajudar hoje, Talita?</div>
        </div>
        
        <!-- √Årea de entrada de mensagens -->
        <div id="input-area">
          <!-- Campo de texto para o usu√°rio digitar -->
          <input type="text" id="userInput" placeholder="Digite aqui...">
          <!-- Bot√£o para enviar a mensagem -->
          <button onclick="sendMessage()">Enviar</button>
        </div>
      </div>
  </main>
  

  <!-- In√≠cio da se√ß√£o de JavaScript -->
  <script>

    window.onload = function() {
        setTimeout(() => mostrarBotoes(), 1000);
    }
     /* Fun√ß√£o para enviar mensagem do usu√°rio e obter resposta do bot */
    function sendMessage() {
      const input = document.getElementById('userInput'); // Obt√©m o elemento de entrada de texto
      const msg = input.value.trim(); // Remove espa√ßos em branco no in√≠cio/fim e armazena a mensagem

      if (msg === "") return; // Se a mensagem estiver vazia, n√£o faz nada

      addMessage(msg, "user");  // Adiciona a mensagem do usu√°rio ao chat
      input.value = ""; // Limpa o campo de entrada

      const resposta = responder(msg);  // Obt√©m a resposta do bot para a mensagem do usu√°rio
      setTimeout(() => addMessage(resposta, "bot"), 500); // Adiciona a resposta do bot ap√≥s um pequeno atraso (500ms)
    }

    /* Fun√ß√£o que adiciona uma mensagem ao chat */
    function addMessage(text, type) {
      const messagesDiv = document.getElementById('messages');  // Obt√©m a div que cont√©m todas as mensagens

      const container = document.createElement('div');  // Cria um container para a mensagem (para controlar o alinhamento)
      container.style.display = 'flex';
      container.style.justifyContent = type === 'user' ? 'flex-end' :  'flex-start';  // Alinha √† direita para mensagens do usu√°rio, esquerda para o bot

      const div = document.createElement('div');  // Cria a div que vai conter o texto da mensagem
      div.className = 'message ' + type;  // Adiciona classes CSS

      // Se for mensagem do bot, converte quebras de linha para tags <br>
      if (type === 'bot') { 
        div.innerHTML = text.replace(/\n/g, "<br>"); // quebra linha s√≥ nas mensagens do bot
      } else {
        div.textContent = text; // Mensagens do usu√°rio usam textContent para seguran√ßa
      }

      // Adiciona a mensagem ao container e o container √† √°rea de mensagens
      container.appendChild(div);
      messagesDiv.appendChild(container);
      messagesDiv.scrollTop = messagesDiv.scrollHeight; // Rola automaticamente para a √∫ltima mensagem
    }

    agurdandoQtd = false; // confirmacoa de qtd
    agurdandoID = false; // confirmacao de ID
    agurdandoPreco = false;

    idProduto = null;
    qtdProduto = null;
    precoProduto = null;


    rastrearID = false

    excluirID = false
    excluirQtd = false


    /* Fun√ß√£o da L√≥gica principal do bot - responde √†s mensagens do usu√°rio */
    function responder(msg) {
      msg = msg.toLowerCase();  // Converte a mensagem para min√∫sculas para facilitar a compara√ß√£o


      ////// Incluir Produto
      if (agurdandoID) {
        const quantidade = parseInt(msg);
        idProduto = quantidade;
        if (!isNaN(quantidade)) {
          agurdandoID = false;
          agurdandoQtd = true;
          addMessage("Insira uma quantidade: ", "bot");
        } else {
          addMessage("Por favor, insira um ID v√°lido", "bot");
        }
        return;
      }

      if (agurdandoQtd) {
        const quantidade = parseInt(msg);
        qtdProduto = quantidade;
        if (!isNaN(quantidade)) {
          agurdandoQtd = false;
          agurdandoPreco = true;
          addMessage("Insira um pre√ßo: ", "bot");
        } else {
          addMessage("Por favor, insira um pre√ßo v√°lido", "bot");
        }
        return;
      }

      if (agurdandoPreco) {
        const quantidade = parseFloat(msg);
        precoProduto = quantidade;
        if (!isNaN(quantidade)) {
          agurdandoPreco = false;
          addMessage(`Aperte qualquer tecla para confimar \n ID =${idProduto}\nQuantidade =${qtdProduto}\n Pre√ßo =${precoProduto}   `, "bot");
        } else {
          addMessage("Por favor, insira um pre√ßo v√°lido", "bot");
        }
        return;
      }

      // Rastrear Produto

      if (rastrearID) {
        const quantidade = parseInt(msg);
        if (!isNaN(quantidade)) {
          rastrearID = false;
          addMessage("Seu produto est√° saindo da filial ", "bot");
        } else {
          addMessage("Por favor, insira um ID v√°lido", "bot");
        }
        return;
      }

      // Excluir Produto

      if (excluirID) {
        const quantidade = parseInt(msg);
        idProduto = quantidade;
        if (!isNaN(quantidade)) {
          excluirID = false;
          excluirQtd = true;
          addMessage("Insira a quantidade que voc√™ deseja excluir: ", "bot");
        } else {
          addMessage("Por favor, insira um ID v√°lido", "bot");
        }
        return;
      }

      if (excluirQtd) {
        const quantidade = parseInt(msg);
        qtdProduto = quantidade;
        if (!isNaN(quantidade)) {
          excluirQtd = false;
          addMessage(`Talita, voc√™ excluiu ${qtdProduto} produtos que possuem o ID ${idProduto}`, "bot");
        } else {
          addMessage("Por favor, insira um ID v√°lido", "bot");
        }
        return;
      }





      // Respostas fixas para mensagens espec√≠ficas
      const respostasFixas = {  
        "motiva√ß√£o": "Acredite em voc√™! O esfor√ßo de hoje √© o sucesso de amanh√£.",
        "clima": "Ainda n√£o posso ver o clima real, mas espero que esteja ensolarado!",
        "sair": "At√© logo! Estarei aqui se precisar.",
      };

      // Se a mensagem corresponder a uma resposta fixa, retorna ela
      if (respostasFixas[msg]) {
        return respostasFixas[msg];
      }

      // Se a mensagem incluir hora
      if (msg.includes("hora")) {
        const agora = new Date();
        return `Agora s√£o ${agora.getHours()}h${agora.getMinutes().toString().padStart(2, '0')}m`;
      }

      if (msg.includes("teste") || msg.includes("testes")) {
        const teste = [
            "Deu certo",
            "Funcionou", 
            "Certo"
        ]
    
        return teste[Math.floor (Math.random() * teste.length)];
      }

      // Se a mensagem incluir piada pega uma dessas respostas aleatoriamente
      if (msg.includes("piada")) {
        const piadas = [
          "Por que o JavaScript foi ao m√©dico? Porque tinha muitos bugs!",
          "Como o programador toma caf√©? Com Java!",
          "Por que o dev terminou com a namorada? Porque ela tinha muitos argumentos."
        ];
        return piadas[Math.floor(Math.random() * piadas.length)];
      }

      
      // Verifica se a mensagem cont√©m palavras relacionadas a benef√≠cios
      if (msg.includes("menu") || msg.includes("menus") || msg.includes("filial") || msg.includes("filiais")) {
        setTimeout(() => mostrarBotoes(), 1000);  // Mostra bot√µes de op√ß√µes ap√≥s 1 segundo
        return;
      }

      // Resposta para perguntas sobre contrato de trabalho
      if (msg.includes("contrato de trabalho")) {
        return `Voc√™ pode acessar o seu contrato de trabalho pelo portal interno da empresa. √â s√≥ entrar em www.empresaX.com/portalrh, fazer login com seu CPF e a senha provis√≥ria que enviamos por e-mail. Qualquer problema no acesso, estamos aqui pra ajudar!`
      }

      // Resposta para perguntas sobre hor√°rio de trabalho
      if (msg.includes("hor√°rio de trabalho") || msg.includes("trabalho") || msg.includes("hor√°rio") || msg.includes("horario") || msg.includes("horario de trabalho")) {
        return `Nossa jornada padr√£o √© de segunda a sexta-feira, das 9h √†s 18h, com 1 hora de pausa para o almo√ßo. Alguns setores t√™m hor√°rios flex√≠veis ‚Äî confirme com sua lideran√ßa se for o caso! üòä`
      }

      // Resposta para perguntas sobre integra√ß√£o
      if (msg.includes("1") || msg.includes("1")) {
        return `<strong>Insira:</strong> \n‚úîÔ∏è Um ID de 5 n√∫meros para sua camiseta \n‚úîÔ∏è Quantos produtos t√™m no estoque \n‚úîÔ∏è Pre√ßo dado ao produto`
      }
      
      

      // Resposta padr√£o caso n√£o entenda a mensagem
      return "Desculpe, n√£o entendi. Tente perguntar sobre benef√≠cios ou motiva√ß√£o.";
    }

    /* Fun√ß√£o que Mostra bot√µes */
    function mostrarBotoes() {
        const messagesDiv = document.getElementById("messages");

        // Bot√µes de op√ß√µes de benef√≠cios
        const opcoes = [
            { 
            texto: "Filial 1 (Camisetas)", 
            resposta: "<strong>Escolha: \n </strong> <strong>(1) </strong>Incluir novo pedido. \n <strong>(2) </strong> Rastrear pedido existente. \n <strong>(3) </strong>Excluir pedido existente." },
            { 
            texto: "Filial 2 (Cal√ßas)", 
            resposta: "<strong>Escolha: \n </strong> <strong>(1) </strong>Incluir novo pedido. \n <strong>(2) </strong> Rastrear pedido existente. \n <strong>(3) </strong> Excluir pedido existente." },
            { 
            texto: "Filial 3 (Cole√ß√£o Inverno)", 
            resposta: "<strong>Escolha: \n </strong> <strong>(1) </strong>Incluir novo pedido. \n <strong>(2) </strong> Rastrear pedido existente. \n  <strong>(3) </strong>Excluir pedido existente." }
            
        ];
        
        // Cria container para os bot√µes
        const container = document.createElement("div");
        container.style.display = "flex";
        container.style.flexDirection = "column";
        container.style.rowgap = "10px";
        container.style.marginTop = "10px"; 
        
        // Cria um bot√£o para cada op√ß√£o
        opcoes.forEach(opcao => {
            const btn = document.createElement("button");
            btn.className = "opcao-btn";
            btn.textContent = opcao.texto;
            btn.onclick = () => {
            addMessage(opcao.texto, "user");  // Adiciona a op√ß√£o selecionada como mensagem do usu√°rio
            
            // Se clicou em "Nada, obrigado", apenas remove os bot√µes
            if (opcao.texto === "‚ùå Nada, obrigado") {
                container.remove();
                return; // ‚Üê impede que o restante do c√≥digo rode
            }


            addMessage(opcao.resposta, "bot");
            container.remove();

            // Cria bot√µes de a√ß√£o ap√≥s selecionar uma op√ß√£o
            const novoContainer = document.createElement("div");
            novoContainer.style.display = "flex";
            novoContainer.style.gap = "10px";
            novoContainer.style.marginTop = "10px";
            
            // Bot√£o para ver outras op√ß√µes
            const repetirBtn = document.createElement("button");
            repetirBtn.className = "opcao-btn";
            repetirBtn.style.marginTop = "10px";
            repetirBtn.textContent = "üîÅ Ver outra filial";
            repetirBtn.onclick = () => {
                addMessage("Ver outra filial", "user");
                novoContainer.remove();
                mostrarBotoes(); // Mostra os bot√µes novamente
            };

            const incluirBtn = document.createElement("button");
            incluirBtn.className = "opcao-btn";
            incluirBtn.style.marginTop = "10px";
            incluirBtn.textContent = "Incluir Pedido";
            incluirBtn.onclick = () => {
                addMessage("Incluir Pedido", "user");
                novoContainer.remove();

                agurdandoID = true;
                addMessage("Insira um ID", "bot");                
            };

            const rastrearBtn = document.createElement("button");
            rastrearBtn.className = "opcao-btn";
            rastrearBtn.style.marginTop = "10px";
            rastrearBtn.textContent = "Rastrear Pedido";
            rastrearBtn.onclick = () => {
                addMessage("Rastrear Pedido", "user");
                novoContainer.remove();

                rastrearID = true;
                addMessage("Insira um ID para rastreio", "bot");                
            };

            const excluirBtn = document.createElement("button");
            excluirBtn.className = "opcao-btn";
            excluirBtn.style.marginTop = "10px";
            excluirBtn.textContent = "Remover Pedido";
            excluirBtn.onclick = () => {
                addMessage("Remover Pedido", "user");
                novoContainer.remove();

                excluirID = true;
                addMessage("Insira um ID para exclus√£o", "bot");                
            };
            
            // Bot√£o para encerrar
            const naoBtn = document.createElement("button");
            naoBtn.className = "opcao-btn";
            naoBtn.textContent = "‚ùå N√£o, obrigado";
            naoBtn.onclick = () => {
                addMessage("N√£o, obrigado", "user");
                novoContainer.remove();
            };
            
            // Adiciona os bot√µes ao container e ao chat
            novoContainer.appendChild(incluirBtn);
            novoContainer.appendChild(rastrearBtn);
            novoContainer.appendChild(excluirBtn);
            novoContainer.appendChild(repetirBtn);
            novoContainer.appendChild(naoBtn);
            messagesDiv.appendChild(novoContainer);
            messagesDiv.scrollTop = messagesDiv.scrollHeight;
            };


            container.appendChild(btn);
        });
        
        // Adiciona os bot√µes ao chat
        messagesDiv.appendChild(container);
        messagesDiv.scrollTop = messagesDiv.scrollHeight;
        }

    // Permite enviar mensagem pressionando Enter
    document.getElementById("userInput").addEventListener("keypress", function(event) {
      if (event.key === "Enter") {
        event.preventDefault(); // Evita o comportamento padr√£o do Enter
        sendMessage();  // Chama a fun√ß√£o de enviar mensagem
      }
    });
  </script>
</body>
</html>